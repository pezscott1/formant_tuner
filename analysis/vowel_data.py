# analysis/vowel_data.py
"""
Unified vowel data for calibration, interpolation, and plausibility.

This file defines:
- Standard vs Expanded vowel sets
- Voice-type-specific expanded vowel sets
- Interpolation triangles
- Barycentric weights
- Default vowel centers (F1, F2, F3)
- Pitch ranges
"""

# ---------------------------------------------------------
# Pitch ranges (sung tessituras)
# ---------------------------------------------------------

PITCH_RANGES = {
    "bass":     (65.0, 370.0),
    "baritone": (82.0, 440.0),
    "tenor":    (130.0, 523.0),
    "alto":     (196.0, 659.0),
    "mezzo":    (196.0, 698.0),
    "soprano":  (261.0, 880.0),
}

# ---------------------------------------------------------
# Standard 5-vowel calibration set
# ---------------------------------------------------------

STANDARD_VOWELS = ["i", "ɛ", "ɑ", "ɔ", "u"]

# ---------------------------------------------------------
# Expanded vowel set (voice-type-specific)
# ---------------------------------------------------------


def expanded_vowels_for_voice(voice_type: str):
    """Return all vowels defined for this voice type."""
    centers = VOWEL_CENTERS.get(voice_type, {})
    return list(centers.keys())

# ---------------------------------------------------------
# Interpolation triangles
# ---------------------------------------------------------


TRIANGLES = {
    "æ": ("ɛ", "ɑ", "i"),
    "e": ("i", "ɛ", "ɑ"),
    "ɪ": ("i", "ɛ", "u"),
    "o": ("u", "ɔ", "ɑ"),
    "ʊ": ("u", "o", "ɔ"),
    "ʌ": ("ɑ", "ɔ", "e"),
}

# ---------------------------------------------------------
# Barycentric weights
# ---------------------------------------------------------

TRIANGLE_WEIGHTS = {
    "æ": (0.45, 0.35, 0.20),
    "e":  (0.50, 0.30, 0.20),
    "ɪ": (0.60, 0.30, 0.10),
    "o":  (0.50, 0.30, 0.20),
    "ʊ": (0.50, 0.30, 0.20),
    "ʌ": (0.40, 0.40, 0.20),
}

# ---------------------------------------------------------
# Default vowel centers (F1, F2, F3)
# ---------------------------------------------------------

VOWEL_CENTERS = {
    "baritone": {
        "i":  (300.0, 2700.0, 3200.0),
        "e":  (350.0, 2050.0, 2900.0),
        "ɛ":  (550.0, 2000.0, 2600.0),
        "æ":  (600.0, 1800.0, 2500.0),
        "a":  (700.0, 1200.0, 2400.0),
        "ɑ":  (750.0, 1600.0, 2400.0),
        "ɔ":  (600.0, 1100.0, 2300.0),
        "o":  (400.0, 800.0, 2200.0),
        "u":  (350.0, 900.0, 2100.0),
        "ɪ":  (400.0, 1700.0, 2600.0),
        "ʊ":  (350.0, 900.0, 2100.0),
        "ʌ":  (450.0, 1300.0, 2200.0),
    },

    "bass": {
        "i":  (260.0, 2100.0, 2900.0),
        "e":  (330.0, 2000.0, 2800.0),
        "ɛ":  (430.0, 1400.0, 2400.0),
        "ɑ":  (620.0, 1200.0, 2200.0),
        "ɔ":  (520.0, 1000.0, 1900.0),
        "u":  (280.0,  800.0, 1700.0),
        "ʌ":  (450.0, 1300.0, 2200.0),
    },

    "tenor": {
        "i":  (300.0, 2400.0, 3100.0),
        "e":  (380.0, 2300.0, 3000.0),
        "ɛ":  (500.0, 1700.0, 2600.0),
        "ɑ":  (700.0, 1400.0, 2400.0),
        "ɔ":  (580.0, 1200.0, 2100.0),
        "u":  (330.0, 1000.0, 1900.0),
    },

    "alto": {
        "i":  (320.0, 2600.0, 3200.0),
        "e":  (400.0, 2400.0, 3100.0),
        "ɛ":  (520.0, 1800.0, 2700.0),
        "ɑ":  (750.0, 1500.0, 2500.0),
        "ɔ":  (600.0, 1300.0, 2200.0),
        "u":  (350.0, 1100.0, 2000.0),
        "ʌ":  (500.0, 1400.0, 2300.0),
    },

    "mezzo": {
        "i":  (310.0, 2500.0, 3150.0),
        "e":  (390.0, 2350.0, 3050.0),
        "ɛ":  (510.0, 1750.0, 2650.0),
        "ɑ":  (730.0, 1450.0, 2450.0),
        "ɔ":  (590.0, 1250.0, 2150.0),
        "u":  (340.0, 1050.0, 1950.0),
    },

    "soprano": {
        "i":  (330.0, 2800.0, 3300.0),
        "e":  (420.0, 2600.0, 3200.0),
        "ɛ":  (540.0, 2000.0, 2800.0),
        "ɑ":  (780.0, 1600.0, 2600.0),
        "ɔ":  (620.0, 1400.0, 2300.0),
        "u":  (370.0, 1200.0, 2100.0),
    },
}
